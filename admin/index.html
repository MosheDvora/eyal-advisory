<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="noindex" />
    <title> 转 转专</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
        }

        /* Login Screen */
        #login-container {
            background: linear-gradient(135deg, #1a2849 0%, #2c3e5f 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .login-box {
            background: white;
            padding: 50px 40px;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 400px;
            width: 100%;
            text-align: center;
        }

        .login-box h1 {
            color: #1a2849;
            font-size: 28px;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .login-box p {
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .input-group {
            margin-bottom: 20px;
            text-align: right;
        }

        .input-group label {
            display: block;
            color: #333;
            font-weight: 500;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .input-group input,
        .input-group textarea {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .input-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .input-group input:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: #c9a96e;
            box-shadow: 0 0 0 3px rgba(201, 169, 110, 0.1);
        }

        .btn {
            padding: 14px 20px;
            background: #c9a96e;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .btn:hover {
            background: #b89555;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(201, 169, 110, 0.3);
        }

        .btn-full {
            width: 100%;
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-success {
            background: #28a745;
        }

        .btn-success:hover {
            background: #218838;
        }

        .error-message {
            background: #fee;
            color: #c33;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 20px;
            font-size: 14px;
            display: none;
        }

        .error-message.show {
            display: block;
            animation: shake 0.5s;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 20px;
            font-size: 14px;
            display: none;
        }

        .success-message.show {
            display: block;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .password-info {
            background: #f0f8ff;
            border-right: 4px solid #1a2849;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 6px;
            text-align: right;
            font-size: 13px;
            color: #1a2849;
        }

        .password-info strong {
            display: block;
            margin-bottom: 5px;
            color: #c9a96e;
        }

        /* CMS Interface */
        #cms-container {
            display: none;
        }

        #cms-container.show {
            display: block;
        }

        .header {
            background: linear-gradient(135deg, #1a2849 0%, #2c3e5f 100%);
            color: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 24px;
        }

        .logout-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: #c82333;
        }

        .cms-content {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .section-card {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .section-card h2 {
            color: #1a2849;
            font-size: 22px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #c9a96e;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .info-box {
            background: #fff3cd;
            border-right: 4px solid #ffc107;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            color: #856404;
        }

        .info-box strong {
            display: block;
            margin-bottom: 5px;
        }

        .field-group {
            margin-bottom: 20px;
        }

        .list-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 15px;
            border-right: 3px solid #c9a96e;
        }

        .list-item h4 {
            color: #1a2849;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="login-container">
        <div class="login-box">
            <h1> 转 转专</h1>
            <p> 住住  砖转 砖拽 </p>

            <div class="password-info">
                <strong> 住住 专砖转:</strong>
                admin123
            </div>

            <div class="error-message" id="error-message">
                住住 砖. 住 砖.
            </div>

            <form id="login-form">
                <div class="input-group">
                    <label for="password">住住</label>
                    <input
                        type="password"
                        id="password"
                        name="password"
                        placeholder=" 住住"
                        required
                        autocomplete="current-password"
                    />
                </div>
                <button type="submit" class="btn btn-full">住</button>
            </form>
        </div>
    </div>

    <!-- CMS Interface -->
    <div id="cms-container">
        <div class="header">
            <div class="header-content">
                <h1> 转 转专 - Eyal Advisory</h1>
                <button class="logout-btn" id="logout-btn">转转拽</button>
            </div>
        </div>

        <div class="cms-content">
            <div class="success-message" id="success-message">
                砖 砖专 爪! 抓 注 "专 拽抓" 注 转 -GitHub.
            </div>

            <div class="info-box">
                <strong> 专转 砖砖:</strong>
                1. 注专 转 砖转 <br>
                2. 抓 "砖专 砖"<br>
                3. 抓 "专 拽抓"  专 转 content.json<br>
                4. 注 转 拽抓 -GitHub (专 专转 驻专转 )
            </div>

            <form id="cms-form">
                <!-- Hero Section -->
                <div class="section-card">
                    <h2> 住 专砖 (Hero)</h2>
                    <div class="input-group">
                        <label>转专转 专砖转 - 砖专 1</label>
                        <input type="text" id="hero_title_line1" />
                    </div>
                    <div class="input-group">
                        <label>转专转 专砖转 - 砖专 2 (砖转)</label>
                        <input type="text" id="hero_title_line2" />
                    </div>
                    <div class="input-group">
                        <label>转专</label>
                        <textarea id="hero_description"></textarea>
                    </div>
                    <div class="input-group">
                        <label>拽住 驻转专 专砖</label>
                        <input type="text" id="hero_button_primary" />
                    </div>
                    <div class="input-group">
                        <label>拽住 驻转专 砖</label>
                        <input type="text" id="hero_button_secondary" />
                    </div>
                </div>

                <!-- Stats Section -->
                <div class="section-card">
                    <h2> 住住拽转</h2>
                    <div class="input-group">
                        <label>砖转 住</label>
                        <input type="number" id="stats_years" />
                    </div>
                    <div class="input-group">
                        <label>住驻专 拽转</label>
                        <input type="number" id="stats_clients" />
                    </div>
                    <div class="input-group">
                        <label>注住拽转 砖砖</label>
                        <input type="number" id="stats_transactions" />
                    </div>
                    <div class="input-group">
                        <label> 砖注转 专爪</label>
                        <input type="number" id="stats_satisfaction" />
                    </div>
                </div>

                <!-- About Section -->
                <div class="section-card">
                    <h2>癸 转</h2>
                    <div class="input-group">
                        <label>转专转 砖</label>
                        <input type="text" id="about_subtitle" />
                    </div>
                    <div class="input-group">
                        <label>转专转 专砖转</label>
                        <input type="text" id="about_title" />
                    </div>
                    <div class="input-group">
                        <label>转专 - 驻住拽 1</label>
                        <textarea id="about_description1"></textarea>
                    </div>
                    <div class="input-group">
                        <label>转专 - 驻住拽 2</label>
                        <textarea id="about_description2"></textarea>
                    </div>
                </div>

                <!-- Services Section -->
                <div class="section-card">
                    <h2> 砖专转</h2>
                    <div class="input-group">
                        <label>转专转 砖</label>
                        <input type="text" id="services_subtitle" />
                    </div>
                    <div class="input-group">
                        <label>转专转 专砖转</label>
                        <input type="text" id="services_title" />
                    </div>

                    <div class="list-item">
                        <h4>砖专转 1</h4>
                        <div class="input-group">
                            <label>转专转</label>
                            <input type="text" id="service1_title" />
                        </div>
                        <div class="input-group">
                            <label>转专</label>
                            <textarea id="service1_description"></textarea>
                        </div>
                    </div>

                    <div class="list-item">
                        <h4>砖专转 2</h4>
                        <div class="input-group">
                            <label>转专转</label>
                            <input type="text" id="service2_title" />
                        </div>
                        <div class="input-group">
                            <label>转专</label>
                            <textarea id="service2_description"></textarea>
                        </div>
                    </div>

                    <div class="list-item">
                        <h4>砖专转 3</h4>
                        <div class="input-group">
                            <label>转专转</label>
                            <input type="text" id="service3_title" />
                        </div>
                        <div class="input-group">
                            <label>转专</label>
                            <textarea id="service3_description"></textarea>
                        </div>
                    </div>

                    <div class="list-item">
                        <h4>砖专转 4</h4>
                        <div class="input-group">
                            <label>转专转</label>
                            <input type="text" id="service4_title" />
                        </div>
                        <div class="input-group">
                            <label>转专</label>
                            <textarea id="service4_description"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Contact Section -->
                <div class="section-card">
                    <h2> 爪专转 拽砖专</h2>
                    <div class="input-group">
                        <label>转专转</label>
                        <input type="text" id="contact_title" />
                    </div>
                    <div class="input-group">
                        <label>转专</label>
                        <textarea id="contact_description"></textarea>
                    </div>
                    <div class="input-group">
                        <label>转转 - 砖专 1</label>
                        <input type="text" id="contact_address_line1" />
                    </div>
                    <div class="input-group">
                        <label>转转 - 砖专 2</label>
                        <input type="text" id="contact_address_line2" />
                    </div>
                    <div class="input-group">
                        <label>驻</label>
                        <input type="text" id="contact_phone" />
                    </div>
                    <div class="input-group">
                        <label></label>
                        <input type="email" id="contact_email" />
                    </div>
                </div>

                <div class="button-group">
                    <button type="submit" class="btn btn-success btn-full">砖专 砖</button>
                </div>
            </form>

            <div class="button-group">
                <button type="button" id="download-btn" class="btn btn-full" disabled>专 拽抓 (专 砖专)</button>
            </div>

            <!-- Instructions -->
            <div class="section-card">
                <h2>  注转 转 拽抓 -GitHub</h2>
                <ol style="text-align: right; line-height: 1.8;">
                    <li>抓 注 "专 拽抓" 注</li>
                    <li> -GitHub repository: <strong>MosheDvora/eyal-advisory</strong></li>
                    <li>抓 注 拽抓 <code>content.json</code></li>
                    <li>抓 注 注驻专 (Edit) 爪 </li>
                    <li>拽 转  转 砖</li>
                    <li>驻转 转 拽抓 砖专转 注转拽 转  转</li>
                    <li>拽 注专 -GitHub</li>
                    <li>  抓 "Commit changes"</li>
                    <li>转 1-2 拽转 -Netlify 注 转 转专</li>
                </ol>
            </div>
        </div>
    </div>

    <script>
        // Password Configuration
        const ADMIN_PASSWORD_HASH = '240be518fabd2724ddb6f04eeb1da5967448d7e831c08c8fa822809f74c720a9'; // admin123

        let contentData = null;

        // SHA-256 hash function
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            return hashHex;
        }

        // Load content from JSON
        async function loadContent() {
            try {
                const response = await fetch('../content.json');
                contentData = await response.json();
                populateForm(contentData);
            } catch (error) {
                console.error('Error loading content:', error);
                alert('砖 注转 转');
            }
        }

        // Populate form with data
        function populateForm(data) {
            // Hero
            document.getElementById('hero_title_line1').value = data.hero.title_line1 || '';
            document.getElementById('hero_title_line2').value = data.hero.title_line2 || '';
            document.getElementById('hero_description').value = data.hero.description || '';
            document.getElementById('hero_button_primary').value = data.hero.button_primary || '';
            document.getElementById('hero_button_secondary').value = data.hero.button_secondary || '';

            // Stats
            document.getElementById('stats_years').value = data.stats.years || 0;
            document.getElementById('stats_clients').value = data.stats.clients || 0;
            document.getElementById('stats_transactions').value = data.stats.transactions || 0;
            document.getElementById('stats_satisfaction').value = data.stats.satisfaction || 0;

            // About
            document.getElementById('about_subtitle').value = data.about.subtitle || '';
            document.getElementById('about_title').value = data.about.title || '';
            document.getElementById('about_description1').value = data.about.description1 || '';
            document.getElementById('about_description2').value = data.about.description2 || '';

            // Services
            document.getElementById('services_subtitle').value = data.services.subtitle || '';
            document.getElementById('services_title').value = data.services.title || '';

            data.services.items.forEach((item, index) => {
                const num = index + 1;
                document.getElementById(`service${num}_title`).value = item.title || '';
                document.getElementById(`service${num}_description`).value = item.description || '';
            });

            // Contact
            document.getElementById('contact_title').value = data.contact.title || '';
            document.getElementById('contact_description').value = data.contact.description || '';
            document.getElementById('contact_address_line1').value = data.contact.address_line1 || '';
            document.getElementById('contact_address_line2').value = data.contact.address_line2 || '';
            document.getElementById('contact_phone').value = data.contact.phone || '';
            document.getElementById('contact_email').value = data.contact.email || '';
        }

        // Get form data
        function getFormData() {
            const data = JSON.parse(JSON.stringify(contentData)); // Clone

            // Hero
            data.hero.title_line1 = document.getElementById('hero_title_line1').value;
            data.hero.title_line2 = document.getElementById('hero_title_line2').value;
            data.hero.description = document.getElementById('hero_description').value;
            data.hero.button_primary = document.getElementById('hero_button_primary').value;
            data.hero.button_secondary = document.getElementById('hero_button_secondary').value;

            // Stats
            data.stats.years = parseInt(document.getElementById('stats_years').value);
            data.stats.clients = parseInt(document.getElementById('stats_clients').value);
            data.stats.transactions = parseInt(document.getElementById('stats_transactions').value);
            data.stats.satisfaction = parseInt(document.getElementById('stats_satisfaction').value);

            // About
            data.about.subtitle = document.getElementById('about_subtitle').value;
            data.about.title = document.getElementById('about_title').value;
            data.about.description1 = document.getElementById('about_description1').value;
            data.about.description2 = document.getElementById('about_description2').value;

            // Services
            data.services.subtitle = document.getElementById('services_subtitle').value;
            data.services.title = document.getElementById('services_title').value;

            for (let i = 0; i < 4; i++) {
                const num = i + 1;
                data.services.items[i].title = document.getElementById(`service${num}_title`).value;
                data.services.items[i].description = document.getElementById(`service${num}_description`).value;
            }

            // Contact
            data.contact.title = document.getElementById('contact_title').value;
            data.contact.description = document.getElementById('contact_description').value;
            data.contact.address_line1 = document.getElementById('contact_address_line1').value;
            data.contact.address_line2 = document.getElementById('contact_address_line2').value;
            data.contact.phone = document.getElementById('contact_phone').value;
            data.contact.email = document.getElementById('contact_email').value;

            return data;
        }

        // Check authentication
        function checkAuth() {
            const isAuthenticated = sessionStorage.getItem('cms_auth') === 'true';
            if (isAuthenticated) {
                showCMS();
            }
        }

        // Show CMS
        function showCMS() {
            document.getElementById('login-container').style.display = 'none';
            document.getElementById('cms-container').classList.add('show');
            loadContent();
        }

        // Login form handler
        document.getElementById('login-form').addEventListener('submit', async function(e) {
            e.preventDefault();

            const passwordInput = document.getElementById('password');
            const errorMessage = document.getElementById('error-message');
            const password = passwordInput.value;

            const hashedPassword = await sha256(password);

            if (hashedPassword === ADMIN_PASSWORD_HASH) {
                sessionStorage.setItem('cms_auth', 'true');
                showCMS();
            } else {
                errorMessage.classList.add('show');
                passwordInput.value = '';
                passwordInput.focus();

                setTimeout(() => {
                    errorMessage.classList.remove('show');
                }, 3000);
            }
        });

        // Logout handler
        document.getElementById('logout-btn').addEventListener('click', function() {
            sessionStorage.removeItem('cms_auth');
            location.reload();
        });

        // Save form
        document.getElementById('cms-form').addEventListener('submit', function(e) {
            e.preventDefault();

            contentData = getFormData();

            const successMessage = document.getElementById('success-message');
            successMessage.classList.add('show');

            document.getElementById('download-btn').disabled = false;

            window.scrollTo({ top: 0, behavior: 'smooth' });

            setTimeout(() => {
                successMessage.classList.remove('show');
            }, 5000);
        });

        // Download button
        document.getElementById('download-btn').addEventListener('click', function() {
            const dataStr = JSON.stringify(contentData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'content.json';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);

            alert('拽抓 专 爪! 注砖 注 转 -GitHub 驻 专转 .');
        });

        // Check authentication on page load
        checkAuth();
    </script>
</body>
</html>
